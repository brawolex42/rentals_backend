{% load i18n static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}{% trans "–ê—Ä–µ–Ω–¥–∞ –∂–∏–ª—å—è ‚Äî –∫–∞—Ç–∞–ª–æ–≥" %}{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'users.css' %}">
</head>
<body>
<header style="display:flex; justify-content:space-between; align-items:center; padding:1rem; background:var(--muted); border-bottom:1px solid var(--border);">
  <h1 style="margin:0;">{% trans "–ê—Ä–µ–Ω–¥–∞ –∂–∏–ª—å—è ‚Äî –∫–∞—Ç–∞–ª–æ–≥" %}</h1>
  <div style="display:flex; gap:.5rem; align-items:center;">
    <form action="{% url 'set_language' %}" method="post" style="display:flex; gap:.5rem; align-items:center;">
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ request.get_full_path }}">
      <button type="submit" name="language" value="ru" class="lang-btn {% if LANGUAGE_CODE == 'ru' %}active{% endif %}">RU</button>
      <button type="submit" name="language" value="de" class="lang-btn {% if LANGUAGE_CODE == 'de' %}active{% endif %}">DE</button>
      <button type="submit" name="language" value="en" class="lang-btn {% if LANGUAGE_CODE == 'en' %}active{% endif %}">EN</button>
    </form>
    <a href="{% url 'register_page' %}" class="primary-btn">{% trans "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" %}</a>
    <button id="themeBtn" type="button" class="theme-btn">üé® –¢–µ–º–∞</button>
  </div>
</header>

<main style="padding:1rem;">
  {% block content %}{% endblock %}
</main>

<script>
(function(){
  const root=document.documentElement;
  const btn=document.getElementById('themeBtn');
  const saved=localStorage.getItem('ui_theme')||'light';
  root.setAttribute('data-theme', saved);
  function nextTheme(t){return t==='light'?'dark':'light'}
  btn.addEventListener('click', ()=>{
    const cur=root.getAttribute('data-theme')||'light';
    const next=nextTheme(cur);
    root.setAttribute('data-theme', next);
    localStorage.setItem('ui_theme', next);
  });
})();
</script>

<style>
:root{--bg:#ffffff;--fg:#111827;--muted:#f8f9fb;--border:#e5e7eb;--link:#2563eb}
[data-theme="dark"]{--bg:#0f172a;--fg:#e5e7eb;--muted:#0b1220;--border:#1f2937;--link:#93c5fd}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);transition:background .2s,color .2s}
a{color:var(--link)}
button{background:transparent;color:var(--fg);cursor:pointer}
.lang-btn{padding:.4rem .7rem; border:1px solid var(--border); border-radius:.5rem;}
.lang-btn.active{background:var(--border); font-weight:600;}
.theme-btn{padding:.45rem .8rem; border:1px solid var(--border); border-radius:.5rem;}
.primary-btn{padding:.45rem .8rem; border:1px solid var(--border); border-radius:.5rem; background:var(--link); color:#fff; text-decoration:none;}
</style>
</body>
</html>
