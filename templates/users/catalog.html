{% extends "base.html" %}
{% block title %}Finden Sie eine gemütliche Unterkunft{% endblock %}

{% block content %}
<div class="card" style="padding:1.25rem; border-radius:16px; margin:0 0 1rem;">
  <h1 class="headline"><span>Finden Sie eine gemütliche Unterkunft</span></h1>
  <p style="opacity:.9; margin:.25rem 0 1rem;">
    Stöbern, online buchen und Buchungen mit einem Klick verwalten.
  </p>
  <div style="display:flex; gap:.6rem; flex-wrap:wrap;">
    <a href="{% url 'home' %}" class="pill active" style="text-decoration:none;">Zum Katalog</a>
    <a href="{% url 'register_page' %}" class="cta" style="text-decoration:none;">Registrieren</a>
  </div>
</div>

{% if object_list %}
  <div style="display:grid; gap:1rem;">
    {% for p in object_list %}
      <div class="card" style="padding:1rem; border-radius:16px;">
        <div style="display:flex; gap:1rem; align-items:flex-start; flex-wrap:wrap;">
          {% if p.cover_image %}
            <img src="{{ p.cover_image.url }}" alt="{{ p.title }}" style="width:280px; height:auto; border-radius:12px;">
          {% endif %}
          <div style="flex:1; min-width:240px;">
            <h2 style="margin:0 0 .25rem;">{{ p.title }}</h2>
            <div class="city" style="margin:.25rem 0 .75rem;">{{ p.city }}</div>
            <div style="display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin:.25rem 0 .75rem;">
              {% if p.nightly_price %}<span class="price">€ {{ p.nightly_price }}</span>{% endif %}
              {% if p.rating %}<span class="rating">⭐ {{ p.rating }}{% if p.reviews_count %} ({{ p.reviews_count }}){% endif %}</span>{% endif %}
            </div>
            <div style="display:flex; gap:.5rem; flex-wrap:wrap;">
              <a href="{% url 'property_detail' p.id %}" class="pill" style="text-decoration:none;">Ansehen</a>
              <a href="{% url 'property_detail' p.id %}" class="pill active" style="text-decoration:none;">Jetzt buchen</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
